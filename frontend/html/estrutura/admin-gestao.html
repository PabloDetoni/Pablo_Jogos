<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Painel de GestÃ£o</title>
  <link rel="stylesheet" href="/frontend/css/estrutura/style.css" />
  <link rel="stylesheet" href="/frontend/css/estrutura/admin.css" />
  <link rel="stylesheet" href="/frontend/css/estrutura/admin-gestao.css" />
</head>
<body>
  <header class="site-header">
    <div class="page-title-bar">
      <h1 class="page-title-fixed">GestÃ£o do Sistema</h1>
    </div>
  </header>
  <div class="admin-layout">
    <nav class="admin-sidepanel">
      <ul>
        <li><a href="admin-dashboard.html">Dashboard</a></li>
        <li><a href="admin-gestao.html" class="active">GestÃ£o</a></li>
        <li><a href="admin-visualizacao.html">VisualizaÃ§Ã£o</a></li>
        <li><a href="admin-ferramentas.html">Ferramentas</a></li>
        <li><button id="btn-logout">Sair do Painel</button></li>
      </ul>
    </nav>
    <main class="admin-main-content">
      <div class="gestao-tabs">
        <button class="gestao-tab active" data-tab="crud-jogo">Jogos</button>
        <button class="gestao-tab" data-tab="crud-usuario">UsuÃ¡rios</button>
        <button class="gestao-tab" data-tab="crud-estatistica">EstatÃ­sticas</button>
        <button class="gestao-tab" data-tab="crud-trofeu">TrofÃ©us</button>
        <button class="gestao-tab" data-tab="crud-admin">Admins</button>
      </div>
      <div class="gestao-content">
        <!-- CRUD JOGO -->
        <section id="crud-jogo" class="gestao-section active">
          <h2>ğŸ® GestÃ£o de Jogos</h2>
          
          <!-- ExplicaÃ§Ã£o das regras de negÃ³cio -->
          <div class="info-rules-box">
            <h4>ğŸ“‹ Regras de Jogos</h4>
            <ul>
              <li>Cada jogo possui um <strong>ID Ãºnico</strong> no sistema</li>
              <li>O <strong>tÃ­tulo</strong> gera automaticamente um <strong>slug</strong> Ãºnico</li>
              <li>Jogos padrÃ£o do sistema <strong>nÃ£o podem</strong> ser excluÃ­dos</li>
              <li>Ao criar um jogo, arquivos HTML/CSS/JS sÃ£o gerados automaticamente</li>
            </ul>
          </div>
          
          <form id="jogoForm" class="crud-form crud-form-enhanced">
            <div class="crud-status-bar" id="jogoStatusBar">
              <span class="status-icon">ğŸ”</span>
              <span class="status-text">Digite um ID e clique em Buscar para comeÃ§ar</span>
            </div>
            
            <div class="search-container">
              <label for="searchJogoId">Buscar Jogo por ID:</label>
              <div class="search-input-group">
                <input type="number" id="searchJogoId" placeholder="Ex: 1, 2, 3..." min="1">
                <button type="button" id="btnBuscarJogo" class="btn-search">ğŸ” Buscar</button>
                <button type="button" id="btnCancelarJogo" class="btn-cancel">âœ–ï¸ Limpar</button>
              </div>
            </div>
            
            <fieldset id="formFieldsJogo" class="crud-fieldset" style="display: none;">
              <legend>ğŸ“ Dados do Jogo</legend>
              <div class="form-grid">
                <div class="form-group">
                  <label for="id_jogo">ğŸ†” ID:</label>
                  <input type="number" id="id_jogo" name="id_jogo" min="1" required readonly class="input-readonly">
                </div>
                <div class="form-group form-group-wide">
                  <label for="titulo_jogo">ğŸ·ï¸ TÃ­tulo: <span class="required">*</span></label>
                  <input type="text" id="titulo_jogo" name="titulo_jogo" required placeholder="Nome do jogo">
                </div>
                <div class="form-group">
                  <label for="genero_jogo">ğŸ­ GÃªnero:</label>
                  <input type="text" id="genero_jogo" name="genero_jogo" placeholder="Ex: Puzzle, AÃ§Ã£o...">
                </div>
                <div class="form-group form-group-full">
                  <label for="descricao_jogo">ğŸ“„ DescriÃ§Ã£o:</label>
                  <textarea id="descricao_jogo" name="descricao_jogo" rows="3" placeholder="Descreva o jogo..."></textarea>
                </div>
              </div>
              
              <div class="crud-actions-bar">
                <button type="button" id="btnAlterarJogo" class="btn-secondary" style="display: none;">âœï¸ Editar</button>
                <button type="button" id="btnSalvarJogo" class="btn-save" style="display: none;">ğŸ’¾ Salvar</button>
                <button type="button" id="btnVoltarJogo" class="btn-back" style="display: none;">â†©ï¸ Voltar</button>
                <button type="button" id="btnExcluirJogo" class="btn-danger" style="display: none;">ğŸ—‘ï¸ Excluir</button>
              </div>
            </fieldset>
            <button type="button" id="btnIncluirJogo" style="display: none;"></button>
          </form>
          <div id="jogoMessageContainer" class="message-container"></div>
        </section>

        <!-- CRUD USUÃRIO -->
        <section id="crud-usuario" class="gestao-section">
          <h2>ğŸ‘¥ GestÃ£o de UsuÃ¡rios</h2>
          
          <!-- ExplicaÃ§Ã£o das regras de negÃ³cio -->
          <div class="info-rules-box">
            <h4>ğŸ“‹ Regras de UsuÃ¡rios</h4>
            <ul>
              <li>Cada usuÃ¡rio possui <strong>ID Ãºnico</strong> e <strong>email Ãºnico</strong></li>
              <li>O <strong>nome</strong> deve ter no mÃ¡ximo <strong>20 caracteres</strong></li>
              <li>A <strong>senha</strong> deve ter entre <strong>8 e 20 caracteres</strong></li>
              <li>O <strong>usuÃ¡rio ID 1</strong> (admin principal) nÃ£o pode ser excluÃ­do</li>
            </ul>
          </div>
          
          <form id="usuarioForm" class="crud-form crud-form-enhanced">
            <div class="crud-status-bar" id="usuarioStatusBar">
              <span class="status-icon">ğŸ”</span>
              <span class="status-text">Digite um ID e clique em Buscar para comeÃ§ar</span>
            </div>
            
            <div class="search-container">
              <label for="searchUsuarioId">Buscar UsuÃ¡rio por ID:</label>
              <div class="search-input-group">
                <input type="number" id="searchUsuarioId" placeholder="Ex: 1, 2, 3..." min="1">
                <button type="button" id="btnBuscarUsuario" class="btn-search">ğŸ” Buscar</button>
                <button type="button" id="btnCancelarUsuario" class="btn-cancel">âœ–ï¸ Limpar</button>
              </div>
            </div>
            
            <fieldset id="formFieldsUsuario" class="crud-fieldset" style="display: none;">
              <legend>ğŸ“ Dados do UsuÃ¡rio</legend>
              <div class="form-grid">
                <div class="form-group">
                  <label for="id_usuario">ğŸ†” ID:</label>
                  <input type="number" id="id_usuario" name="id_usuario" min="1" required readonly class="input-readonly">
                </div>
                <div class="form-group">
                  <label for="nome_usuario">ğŸ‘¤ Nome: <span class="required">*</span></label>
                  <input type="text" id="nome_usuario" name="nome_usuario" required maxlength="20" placeholder="MÃ¡x. 20 caracteres">
                </div>
                <div class="form-group" style="display: none;">
                  <label for="status_usuario">ğŸ“Š Status:</label>
                  <input type="text" id="status_usuario" name="status_usuario" readonly class="input-readonly">
                </div>
                <div class="form-group form-group-wide">
                  <label for="email_usuario">ğŸ“§ Email: <span class="required">*</span></label>
                  <input type="email" id="email_usuario" name="email_usuario" required placeholder="usuario@email.com">
                </div>
                <div class="form-group form-group-senha">
                  <label for="senha_usuario">ğŸ”’ Senha: <span class="required">*</span></label>
                  <input type="password" id="senha_usuario" name="senha_usuario" required minlength="8" maxlength="20" placeholder="8-20 caracteres">
                  <button type="button" class="btn-toggle-password" onclick="toggleSenhaVisibility()">ğŸ‘ï¸</button>
                </div>
              </div>
              
              <div class="crud-actions-bar">
                <button type="button" id="btnAlterarUsuario" class="btn-secondary" style="display: none;">âœï¸ Editar</button>
                <button type="button" id="btnSalvarUsuario" class="btn-save" style="display: none;">ğŸ’¾ Salvar</button>
                <button type="button" id="btnVoltarUsuario" class="btn-back" style="display: none;">â†©ï¸ Voltar</button>
                <button type="button" id="btnExcluirUsuario" class="btn-danger" style="display: none;">ğŸ—‘ï¸ Excluir</button>
              </div>
            </fieldset>
            <button type="button" id="btnIncluirUsuario" style="display: none;"></button>
          </form>
          <div id="usuarioMessageContainer" class="message-container"></div>
        </section>

        <!-- CRUD ESTATÃSTICAS (Partidas) -->
        <section id="crud-estatistica" class="gestao-section">
          <h2>ğŸ“Š GestÃ£o de EstatÃ­sticas / Partidas</h2>
          
          <!-- ExplicaÃ§Ã£o das regras de negÃ³cio -->
          <div class="info-rules-box">
            <h4>ğŸ“‹ Regras de Partidas</h4>
            <ul>
              <li>Cada partida estÃ¡ vinculada a um <strong>usuÃ¡rio</strong> e um <strong>jogo</strong></li>
              <li>Os campos variam de acordo com o <strong>tipo de jogo</strong></li>
              <li>VocÃª pode editar partidas <strong>individualmente</strong> ou <strong>em lote</strong></li>
              <li>Excluir partidas <strong>afeta os rankings</strong> e estatÃ­sticas do usuÃ¡rio</li>
            </ul>
          </div>
          
          <!-- Card de aÃ§Ã£o principal -->
          <div class="gestao-actions-grid">
            <div class="action-card action-card-primary" onclick="window.openModalPartidas()">
              <div class="action-card-icon">ğŸ“Š</div>
              <div class="action-card-content">
                <h4>Gerenciar Partidas</h4>
                <p>Visualizar, criar, editar ou excluir partidas</p>
              </div>
              <button type="button" class="btn-primary">Abrir</button>
            </div>
          </div>
          
          <div id="estatisticaMessageContainer" class="message-container"></div>
        </section>

        <!-- CRUD TROFÃ‰US -->
        <section id="crud-trofeu" class="gestao-section">
          <h2>ğŸ† GestÃ£o de TrofÃ©us</h2>
          
          <!-- ExplicaÃ§Ã£o das regras de negÃ³cio -->
          <div class="info-rules-box">
            <h4>ğŸ“‹ Regras de TrofÃ©us</h4>
            <ul>
              <li>Um <strong>usuÃ¡rio</strong> pode ter <strong>vÃ¡rios trofÃ©us</strong></li>
              <li>Cada <strong>trofÃ©u</strong> pertence a <strong>apenas um usuÃ¡rio</strong></li>
              <li>TrofÃ©us possuem <strong>Ã­cone visual</strong> e <strong>cor</strong> personalizÃ¡veis</li>
            </ul>
          </div>
          
          <!-- AÃ§Ãµes principais separadas -->
          <div class="gestao-actions-grid">
            <div class="action-card action-card-primary" onclick="window.openModalTrofeuTipo()">
              <div class="action-card-icon">ğŸ†</div>
              <div class="action-card-content">
                <h4>CatÃ¡logo de TrofÃ©us</h4>
                <p>Criar, editar e gerenciar os tipos de trofÃ©us disponÃ­veis</p>
              </div>
              <button type="button" class="btn-primary">Gerenciar</button>
            </div>
            
            <div class="action-card action-card-secondary" onclick="window.openModalTrofeuAtribuir()">
              <div class="action-card-icon">ğŸ–ï¸</div>
              <div class="action-card-content">
                <h4>Conceder TrofÃ©u</h4>
                <p>Atribuir um trofÃ©u a um usuÃ¡rio especÃ­fico</p>
              </div>
              <button type="button" class="btn-secondary">Atribuir</button>
            </div>
          </div>
          
          <!-- Lista de trofÃ©us recentes -->
          <div class="trofeu-section-divider">
            <h3>ğŸ“œ TrofÃ©us Concedidos Recentemente</h3>
          </div>
          <div id="trofeuListContainer"></div>
          <div id="trofeuMessageContainer" class="message-container"></div>
        </section>

        <!-- CRUD ADMIN -->
        <section id="crud-admin" class="gestao-section">
          <h2>ğŸ‘‘ GestÃ£o de Administradores</h2>
          
          <!-- ExplicaÃ§Ã£o das regras de negÃ³cio -->
          <div class="info-rules-box">
            <h4>ğŸ“‹ Regras de Admins</h4>
            <ul>
              <li>RelaÃ§Ã£o <strong>1:1</strong> entre usuÃ¡rio e admin</li>
              <li>Todo admin <strong>jÃ¡ deve existir</strong> como usuÃ¡rio</li>
              <li>Rebaixar admin <strong>nÃ£o exclui</strong> o usuÃ¡rio</li>
              <li>Admin principal (ID 1) <strong>nÃ£o pode</strong> ser rebaixado</li>
            </ul>
          </div>
          
          <!-- Lista de Admins existentes -->
          <div class="admin-list-section">
            <h3>ğŸ‘¥ Administradores Atuais</h3>
            <div id="adminListContainer">
              <p class="loading-text">Carregando lista de admins...</p>
            </div>
          </div>
          
          <!-- SeÃ§Ã£o para promover novo admin -->
          <div class="admin-promote-section">
            <h3>â• Promover UsuÃ¡rio a Admin</h3>
            <form id="adminPromoteForm" class="crud-form inline-form">
              <div class="form-row">
                <div class="form-group">
                  <label for="promoteUserId">ID do UsuÃ¡rio:</label>
                  <input type="number" id="promoteUserId" placeholder="Digite o ID" min="1">
                </div>
                <div class="form-group">
                  <label for="promoteNivel">NÃ­vel de PermissÃ£o:</label>
                  <select id="promoteNivel">
                    <option value="1">1 - BÃ¡sico</option>
                    <option value="2">2 - IntermediÃ¡rio</option>
                    <option value="3">3 - AvanÃ§ado</option>
                    <option value="5">5 - Moderador</option>
                    <option value="10">10 - Super Admin</option>
                  </select>
                </div>
                <button type="button" id="btnPromoverNovoAdmin" class="btn-primary">
                  ğŸ‘‘ Tornar Admin
                </button>
              </div>
              <div id="promoteUserPreview" class="user-preview" style="display:none;"></div>
            </form>
          </div>
          
          <div id="adminMessageContainer" class="message-container"></div>
        </section>
      </div>
    </main>
  </div>

  <!-- MODAL: Alterar Partidas -->
  <div id="modal-alterar-partidas" class="gestao-modal-overlay" style="display:none;">
    <div class="gestao-modal gestao-modal-large">
      <button class="modal-close" onclick="window.closeModalPartidas()">&times;</button>
      <div id="modalPartidasContent" class="gestao-modal-content"></div>
    </div>
  </div>

  <!-- MODAL: Gerenciar Tipos de TrofÃ©u -->
  <div id="modal-trofeu-tipo" class="gestao-modal-overlay" style="display:none;">
    <div class="gestao-modal gestao-modal-large">
      <button class="modal-close" onclick="window.closeModalTrofeuTipo()">&times;</button>
      <div id="modalTrofeuTipoContent" class="gestao-modal-content"></div>
    </div>
  </div>

  <!-- MODAL: Atribuir TrofÃ©u a UsuÃ¡rio -->
  <div id="modal-trofeu-atribuir" class="gestao-modal-overlay" style="display:none;">
    <div class="gestao-modal">
      <button class="modal-close" onclick="window.closeModalTrofeuAtribuir()">&times;</button>
      <div id="modalTrofeuAtribuirContent" class="gestao-modal-content"></div>
    </div>
  </div>

  <!-- MODAL: Editar Admin -->
  <div id="modal-editar-admin" class="gestao-modal-overlay" style="display:none;">
    <div class="gestao-modal gestao-modal-small">
      <button class="modal-close" onclick="window.closeModalEditarAdmin()">&times;</button>
      <div id="modalEditarAdminContent" class="gestao-modal-content"></div>
    </div>
  </div>

  <script src="/frontend/js/estrutura/admin-gestao.js"></script>
</body>
</html>
